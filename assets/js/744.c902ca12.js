"use strict";(self.webpackChunkroblox_ts=self.webpackChunkroblox_ts||[]).push([[744],{584:(e,t,s)=>{s.d(t,{O:()=>l,g:()=>r});var n=s(2992),o=s.n(n);const a="#code/",i="#gist/";async function r(e){if(e.startsWith(a)){const t=o().decompressFromEncodedURIComponent(e.substr(a.length));if(null!==t)return t}else if(e.startsWith(i)){const t=e.substr(i.length),s=await fetch(`https://api.github.com/gists/${t}`);if(200===s.status){const e=await s.json();return Object.values(e.files)[0].content}}}function l(e){return a+o().compressToEncodedURIComponent(e)}},6744:(e,t,s)=>{s.r(t),s.d(t,{default:()=>K});var n=s(5293),o=s(6025),a=s(8553),i=s(356),r=s.n(i),l=s(8463),c=s(6745),d=s(2396),u=s(6540);const p="subNavBar_s2i2",h="playground_yo3h",g="editorWrapper_TO5z",m="pointer_U5I7";var f=s(584),y=s(4848);const w={minimap:{enabled:!1},scrollbar:{useShadows:!1},scrollBeyondLastLine:!1,insertSpaces:!1,tabSize:4},x={...w},v={...w,readOnly:!0},b=["Lava","t","React"],j=["types","compiler-types"],S={parser:"typescript",plugins:[c.Ay,d.A],semi:!0,trailingComma:"all",singleQuote:!1,tabWidth:4,useTabs:!0,arrowParens:"avoid"};const $=new class{constructor(e){this.getValue=e,this.isInitialized=!1}get(){return this.isInitialized||(this.isInitialized=!0,this.value=this.getValue()),this.value}}(()=>new Worker("../rbxts-worker.js")),_=new Set,E=/["']@rbxts\/([^"']+)["']/g,M=/\/\/\/\s*<reference path=["']([^"']+)["']\s*\/>/g,C=/\/\/\/\s*<reference types=["']@rbxts\/([^"']+)["']\s*\/>/g,k=/(?:import|export)\s+.+\s+from\s+['"]([^'"]+)['"]/g;function N(e,t){const s=new Array;for(const n of t.matchAll(e))s.push(n[1]);return s}const P="@rbxts";async function A(e){const t=e.split("/");return t[1].includes("@")||(t[1]+="@latest"),e=t.join("/"),fetch(`https://cdn.jsdelivr.net/npm/${e}`)}async function O(e,t){$.get().postMessage({type:"writeFile",filePath:`/node_modules/${e}`,content:t}),(await a.wG.init()).languages.typescript.typescriptDefaults.addExtraLib(t,e)}const R=new Set;async function W(e,t,s=!1){if(R.has(t))return Promise.resolve();R.add(t);const n=await A(t).then(e=>404===e.status?A(t=t.slice(0,-5)+"/index.d.ts"):e).then(e=>e.text()),o=new Array;for(const a of N(M,n)){const s=r().resolve(r().dirname(t),a).substr(1);o.push(W(e,s))}for(let a of N(k,n))if((a.endsWith(".")||a.endsWith(".."))&&(a+="/index"),a.startsWith(P))o.push(F(a.substr(7)));else{const s=r().resolve(r().dirname(t),a).substr(1)+".d.ts";o.push(W(e,s))}for(const a of N(C,n))o.push(F(a));return await O(t,n),s&&(await a.wG.init()).languages.typescript.typescriptDefaults.addExtraLib(n,r().join(e,"index.d.ts")),Promise.allSettled(o)}async function F(e){if(!_.has(e)){_.add(e);const t=`${P}/${e}`,s=`${t}/package.json`,n=await A(s);if(200===n.status){const e=await n.json();await O(s,JSON.stringify(e)),console.log(`${t}@${e.version}`);const o=r().resolve(`/${t}`,e.main??"").substr(1),a=r().resolve(`/${t}`,e.types??e.typings??"index.d.ts").substr(1);$.get().postMessage({type:"setMapping",typingsPath:`/node_modules/${a}`,mainPath:`/node_modules/${o}`}),await W(t,a,!0)}else console.warn(`failed to download ${t}`)}}const I=e=>(0,y.jsx)("li",{children:(0,y.jsx)("a",{className:`${m} dropdown__link`,onClick:e.onClick,children:e.name})}),K=()=>{$.get();const[e,t]=u.useState(""),[s,i]=u.useState(""),[r,c]=u.useState(),[d,w]=u.useState(!1),[_,M]=u.useState(),C=(0,o.Ay)("playground-examples/src");function k(e){_?.setValue(e)}async function A(e){return async function(e,t){return fetch(`${e}/${t}.tsx`).then(e=>e.text())}(C,e).then(e=>{k(e),t(e)})}u.useEffect(()=>{_&&(""!==location.hash?(0,f.g)(location.hash).then(e=>{e&&(k(e),t(e))}):_&&""===_.getValue()&&A(b[0]))},[_]);u.useEffect(()=>{_&&(location.hash=(0,f.O)(e))},[e,_]),u.useEffect(()=>{d&&(void 0!==r&&window.clearTimeout(r),c(window.setTimeout(()=>{Promise.allSettled(N(E,e).map(F)).then(()=>{$.get().postMessage({type:"compile",source:e})})},300)))},[e,d]),u.useEffect(()=>{$.get().addEventListener("message",e=>{const t=e.data.source;"string"==typeof t&&i(t)})},[]),u.useEffect(()=>{Promise.allSettled(j.map(e=>F(e))).then(()=>w(!0))},[]),u.useEffect(()=>{window.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&"KeyS"===e.code&&(e.preventDefault(),navigator.clipboard.writeText(location.href))})},[]);const{colorMode:O}=(0,n.G)(),R="dark"===O?"vs-dark":"light";return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("nav",{className:`${p} navbar`,children:(0,y.jsx)("div",{className:"navbar__inner",children:(0,y.jsx)("div",{className:"navbar__items",children:(0,y.jsxs)("div",{className:`navbar__item dropdown dropdown--hoverable ${m}`,children:[(0,y.jsx)("a",{className:`navbar__link ${m}`,children:"Examples"}),(0,y.jsx)("ul",{className:"dropdown__menu",children:b.map((e,t)=>(0,y.jsx)(I,{name:e,onClick:()=>A(e)},t))})]})})})}),(0,y.jsxs)("div",{className:h,children:[(0,y.jsx)("div",{className:g,children:(0,y.jsx)(a.Ay,{language:"typescript",options:x,theme:R,onMount:s=>{a.wG.init().then(n=>{console.log(`typescript@${n.languages.typescript.typescriptVersion}`),n.languages.typescript.typescriptDefaults.setCompilerOptions({allowNonTsExtensions:!0,allowSyntheticDefaultImports:!0,downlevelIteration:!0,module:n.languages.typescript.ModuleKind.CommonJS,moduleResolution:n.languages.typescript.ModuleResolutionKind.NodeJs,noLib:!0,strict:!0,target:n.languages.typescript.ScriptTarget.ESNext,typeRoots:[`node_modules/${P}`],noEmit:!0,resolveJsonModule:!0,experimentalDecorators:!0,baseUrl:".",rootDir:".",jsx:n.languages.typescript.JsxEmit.React,jsxFactory:"React.createElement",jsxFragmentFactory:"React.Fragment"});const o=n.Uri.file("input.tsx"),a=n.editor.getModel(o)||n.editor.createModel(e,"typescript",o);s.setModel(a);const i=s.onDidChangeModelContent(()=>t(s.getValue()));let r=0;return s.addCommand(n.KeyMod.Alt|n.KeyMod.Shift|n.KeyCode.KeyF,()=>{const e=++r;l.Ay.formatWithCursor(a.getValue(),{...S,printWidth:Math.min(120,s.getLayoutInfo().viewportColumn),cursorOffset:a.getOffsetAt(s.getPosition()||new n.Position(0,0)),rangeStart:void 0,rangeEnd:void 0}).then(t=>{e===r&&(s.pushUndoStop(),s.executeEdits("prettier",[{range:a.getFullModelRange(),text:t.formatted}],()=>[n.Selection.fromPositions(a.getPositionAt(t.cursorOffset))]),s.pushUndoStop())}).catch(e=>console.warn(`Prettier failed: ${e}`))}),M(a),t(a.getValue()),()=>i.dispose()})}})}),(0,y.jsx)("div",{className:g,children:(0,y.jsx)(a.Ay,{language:"lua",options:v,theme:R,value:s})})]})]})}}}]);