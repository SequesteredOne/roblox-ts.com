"use strict";(self.webpackChunkroblox_ts=self.webpackChunkroblox_ts||[]).push([[325],{5113:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>E,contentTitle:()=>N,default:()=>V,frontMatter:()=>I,metadata:()=>r,toc:()=>k});const r=JSON.parse('{"id":"guides/roact-jsx","title":"Roact JSX","description":"The following guide assumes that you are already familiar with Roact.","source":"@site/docs/guides/roact-jsx.mdx","sourceDirName":"guides","slug":"/guides/roact-jsx","permalink":"/docs/guides/roact-jsx","draft":false,"unlisted":false,"editUrl":"https://github.com/roblox-ts/roblox-ts.com/blob/master/docs/guides/roact-jsx.mdx","tags":[],"version":"current","frontMatter":{"title":"Roact JSX"},"sidebar":"docs","previous":{"title":"LuaTuple<T>","permalink":"/docs/guides/lua-tuple"},"next":{"title":"Using Existing Luau","permalink":"/docs/guides/using-existing-luau"}}');var a=t(4848),s=t(8453),o=t(6540),i=t(4164),l=t(3104),c=t(6347),d=t(205),u=t(7485),h=t(1682),m=t(679);function x(e){return o.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,o.useMemo)(()=>{const e=n??function(e){return x(e).map(({props:{value:e,label:n,attributes:t,default:r}})=>({value:e,label:n,attributes:t,default:r}))}(t);return function(e){const n=(0,h.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,t])}function f({value:e,tabValues:n}){return n.some(n=>n.value===e)}function b({queryString:e=!1,groupId:n}){const t=(0,c.W6)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,u.aZ)(r),(0,o.useCallback)(e=>{if(!r)return;const n=new URLSearchParams(t.location.search);n.set(r,e),t.replace({...t.location,search:n.toString()})},[r,t])]}function j(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,a=p(e),[s,i]=(0,o.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!f({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find(e=>e.default)??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:a})),[l,c]=b({queryString:t,groupId:r}),[u,h]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,r]=(0,m.Dv)(n);return[t,(0,o.useCallback)(e=>{n&&r.set(e)},[n,r])]}({groupId:r}),x=(()=>{const e=l??u;return f({value:e,tabValues:a})?e:null})();(0,d.A)(()=>{x&&i(x)},[x]);return{selectedValue:s,selectValue:(0,o.useCallback)(e=>{if(!f({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);i(e),c(e),h(e)},[c,h,a]),tabValues:a}}var g=t(2303);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function y({className:e,block:n,selectedValue:t,selectValue:r,tabValues:s}){const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.a_)(),d=e=>{const n=e.currentTarget,a=o.indexOf(n),i=s[a].value;i!==t&&(c(n),r(i))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return(0,a.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":n},e),children:s.map(({value:e,label:n,attributes:r})=>(0,a.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{o.push(e)},onKeyDown:u,onClick:d,...r,className:(0,i.A)("tabs__item",v.tabItem,r?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function w({lazy:e,children:n,selectedValue:t}){const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=r.find(e=>e.props.value===t);return e?(0,o.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,a.jsx)("div",{className:"margin-top--md",children:r.map((e,n)=>(0,o.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function R(e){const n=j(e);return(0,a.jsxs)("div",{className:(0,i.A)("tabs-container",v.tabList),children:[(0,a.jsx)(y,{...n,...e}),(0,a.jsx)(w,{...n,...e})]})}function S(e){const n=(0,g.A)();return(0,a.jsx)(R,{...e,children:x(e.children)},String(n))}const C={tabItem:"tabItem_Ymn6"};function T({children:e,hidden:n,className:t}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,i.A)(C.tabItem,t),hidden:n,children:e})}const I={title:"Roact JSX"},N=void 0,E={},k=[{value:"Introduction",id:"introduction",level:2},{value:"Tag Names",id:"tag-names",level:2},{value:"Special Attributes",id:"special-attributes",level:2},{value:"<code>Key</code> Attribute",id:"key-attribute",level:3},{value:"<code>Ref</code> Attribute",id:"ref-attribute",level:3},{value:"<code>Change</code> Attribute",id:"change-attribute",level:3},{value:"<code>Event</code> Attribute",id:"event-attribute",level:3},{value:"Spreading into Attributes",id:"spreading-into-attributes",level:2},{value:"Spreading into Children",id:"spreading-into-children",level:2},{value:"Using Values as Children",id:"using-values-as-children",level:2},{value:"Fragments",id:"fragments",level:2},{value:"Extending the default JSX elements",id:"extending-the-default-jsx-elements",level:2}];function A(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsxs)(n.p,{children:["The following guide assumes that you are already familiar with Roact. ",(0,a.jsx)("br",{}),"\nPlease refer to the ",(0,a.jsx)(n.a,{href:"https://roblox.github.io/roact/",children:"Roact documentation"})," for more information."]})}),"\n",(0,a.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,a.jsx)(n.p,{children:'While roblox-ts allows you to use Roact just like you would in Luau, it also supports a "JSX" shorthand form.'}),"\n","\n",(0,a.jsxs)(S,{defaultValue:"tsx",values:[{label:"JSX",value:"tsx"},{label:"Normal",value:"ts"}],children:[(0,a.jsx)(T,{value:"tsx",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'import Roact from "@rbxts/roact";\n\nconst element = (\n\t<frame Size={new UDim2(1, 0, 1, 0)}>\n\t\t<frame Key="Child" Size={new UDim2(1, 0, 1, 0)} />\n\t</frame>\n);\n'})})}),(0,a.jsx)(T,{value:"ts",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'import Roact from "@rbxts/roact";\n\nconst element = Roact.createElement(\n\t"Frame",\n\t{\n\t\tSize: new UDim2(1, 0, 1, 0),\n\t},\n\t{\n\t\tChild: Roact.createElement("Frame", {\n\t\t\tSize: new UDim2(1, 0, 1, 0),\n\t\t}),\n\t}\n);\n'})})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://reactjs.org/docs/introducing-jsx.html",children:"You can learn more about JSX here."})}),"\n",(0,a.jsx)(n.h2,{id:"tag-names",children:"Tag Names"}),"\n",(0,a.jsxs)(n.p,{children:['The "tag name" in JSX is the expression after the initial ',(0,a.jsx)(n.code,{children:"<"})," character. ",(0,a.jsx)("br",{}),"\nFor example, ",(0,a.jsx)(n.code,{children:"frame"})," is the tag name of ",(0,a.jsx)(n.code,{children:"<frame />"}),"."]}),"\n",(0,a.jsx)(n.p,{children:"You can use any Roblox UI class (host components) as a built-in JSX tag name by converting the name to lowercase."}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Frame"})," \u2192 ",(0,a.jsx)(n.code,{children:"frame"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"UIListLayout"})," \u2192 ",(0,a.jsx)(n.code,{children:"uilistlayout"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"ViewportFrame"})," \u2192 ",(0,a.jsx)(n.code,{children:"viewportframe"})]}),"\n",(0,a.jsx)(n.li,{children:"etc."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Tag names can also be custom class components or functional components."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Custom components must use PascalCase."})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'import Roact from "@rbxts/roact";\n\ninterface MyComponentProps {\n\tvalue: string;\n}\n\nfunction MyComponent(props: MyComponentProps) {\n\treturn <textlabel Text={props.value} />;\n}\n\nconst element = <MyComponent value="foobar" />;\n'})}),"\n",(0,a.jsx)(n.p,{children:"Tag names can also be a property access expression to use components which are nested inside of objects or namespaces."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'import Roact from "@rbxts/roact";\n\ninterface MyComponentProps {\n\tvalue: string;\n}\n\nfunction MyComponent(props: MyComponentProps) {\n\treturn <textlabel Text={props.value} />;\n}\n\nconst Components = {\n\tMyComponent: MyComponent,\n};\n\nconst element = <Components.MyComponent value="foobar" />;\n'})}),"\n",(0,a.jsx)(n.h2,{id:"special-attributes",children:"Special Attributes"}),"\n",(0,a.jsxs)(n.h3,{id:"key-attribute",children:[(0,a.jsx)(n.code,{children:"Key"})," Attribute"]}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"Key"})," attribute controls what your UI Instance will be named in the DataModel. This is the same as the ",(0,a.jsx)(n.code,{children:'"Child"'})," key in this Luau example:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'Roact.createElement("Frame", {\n\tChild = Roact.createElement("Frame", {}),\n})\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'import Roact from "@rbxts/roact";\n\nconst element = (\n\t<frame>\n\t\t<frame Key="Child" />\n\t</frame>\n);\n'})}),"\n",(0,a.jsxs)(n.p,{children:["If an element is given the ",(0,a.jsx)(n.code,{children:"Key"})," attribute and it ",(0,a.jsx)(n.strong,{children:"not"})," a child of another element, it will be wrapped in a ",(0,a.jsx)(n.code,{children:"Roact.Fragment"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'import Roact from "@rbxts/roact";\n\nconst element = <frame Key="Child" />;\n'})}),"\n",(0,a.jsxs)(n.h3,{id:"ref-attribute",children:[(0,a.jsx)(n.code,{children:"Ref"})," Attribute"]}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"Ref"})," attribute directly maps to the ",(0,a.jsx)(n.code,{children:"[Roact.Ref]"})," key in Luau."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'import Roact from "@rbxts/roact";\n\nconst ref = Roact.createRef<Frame>();\nconst element = <frame Ref={ref} />;\n'})}),"\n",(0,a.jsxs)(n.h3,{id:"change-attribute",children:[(0,a.jsx)(n.code,{children:"Change"})," Attribute"]}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"Change"})," attribute takes an object which maps property name -> changed function. The changed function value will be given a reference ",(0,a.jsx)(n.code,{children:"rbx"})," to the rendered UI instance."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsxs)(n.strong,{children:["Note the double curly braces ",(0,a.jsx)(n.code,{children:"{{"})," and ",(0,a.jsx)(n.code,{children:"}}"}),"."]})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'import Roact from "@rbxts/roact";\n\nconst element = (\n\t<frame\n\t\tChange={{\n\t\t\tPosition: (rbx) => print(`${rbx.GetFullName()} changed Position!`),\n\t\t}}\n\t/>\n);\n'})}),"\n",(0,a.jsxs)(n.h3,{id:"event-attribute",children:[(0,a.jsx)(n.code,{children:"Event"})," Attribute"]}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"Event"})," attribute takes an object which maps property name -> event connection function. The event connection function value will be given a reference ",(0,a.jsx)(n.code,{children:"rbx"})," to the rendered UI instance followed by the rest of the event arguments."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsxs)(n.strong,{children:["Note the double curly braces ",(0,a.jsx)(n.code,{children:"{{"})," and ",(0,a.jsx)(n.code,{children:"}}"}),"."]})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'import Roact from "@rbxts/roact";\n\nconst element = (\n\t<textbutton\n\t\tEvent={{\n\t\t\tMouseButton1Down: (rbx, x, y) =>\n\t\t\t\tprint(`${rbx.GetFullName()} was clicked at (${x}, ${y})`),\n\t\t}}\n\t/>\n);\n'})}),"\n",(0,a.jsx)(n.h2,{id:"spreading-into-attributes",children:"Spreading into Attributes"}),"\n",(0,a.jsxs)(n.p,{children:["You can spread objects into attributes using the form ",(0,a.jsx)(n.code,{children:"{...exp}"})," where ",(0,a.jsx)(n.code,{children:"exp"})," is an object. ",(0,a.jsx)("br",{}),"\nThis is useful for creating reusable preset lists of properties."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'import Roact from "@rbxts/roact";\n\nconst MyStyle: Partial<WritableInstanceProperties<Frame>> = {\n\tBackgroundColor3: new Color3(0, 0, 0),\n\tBackgroundTransparency: 0.5,\n};\n\nconst element = <frame {...MyStyle} />;\n'})}),"\n",(0,a.jsx)(n.h2,{id:"spreading-into-children",children:"Spreading into Children"}),"\n",(0,a.jsxs)(n.p,{children:["You can spread arrays into children using the form ",(0,a.jsx)(n.code,{children:"{...exp}"})," where ",(0,a.jsx)(n.code,{children:"exp"})," is a ",(0,a.jsx)(n.code,{children:"ReadonlyArray<T>"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'import Roact from "@rbxts/roact";\n\nconst listItems = new Array<Roact.Element>();\nfor (let i = 0; i < 10; i++) {\n\tlistItems.push(<textbutton Text={`Button ${i}`} />);\n}\n\nconst element = <frame>{...listItems}</frame>;\n'})}),"\n",(0,a.jsx)(n.h2,{id:"using-values-as-children",children:"Using Values as Children"}),"\n",(0,a.jsxs)(n.p,{children:["You can use values for children using the form ",(0,a.jsx)(n.code,{children:"{exp}"}),". This is useful for programmatically creating children. The allowed values are:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"Roact.Element"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"ReadonlyArray<T>"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"ReadonlyMap<K, V>"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"boolean"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"undefined"})}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"boolean"})," and ",(0,a.jsx)(n.code,{children:"undefined"})," values do not actually get put into the children props, but allowing the values here is useful for creating conditional children values."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'import Roact from "@rbxts/roact";\n\nlet condition = false;\n\nconst element = (\n\t<frame>\n\t\t{condition && <frame />}\n\t\t{condition ? <frame /> : undefined}\n\t</frame>\n);\n'})}),"\n",(0,a.jsx)(n.h2,{id:"fragments",children:"Fragments"}),"\n",(0,a.jsxs)(n.p,{children:["To create a Fragment with JSX you can either use the tag name ",(0,a.jsx)(n.code,{children:"Roact.Fragment"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'import Roact from "@rbxts/roact";\n\nconst fragment = <Roact.Fragment></Roact.Fragment>;\n'})}),"\n",(0,a.jsx)(n.p,{children:"Or, you can use the shorthand form:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'import Roact from "@rbxts/roact";\n\nconst fragment = <></>;\n'})}),"\n",(0,a.jsx)(n.h2,{id:"extending-the-default-jsx-elements",children:"Extending the default JSX elements"}),"\n",(0,a.jsxs)(n.p,{children:["By default the JSX supports all gui objects, however this may be limiting in cases where you want to manage other instances using Roact.\nWhich elements are supported by JSX is determined by a global ",(0,a.jsx)(n.code,{children:"JSX"})," namespace, to allow for more instances to be created this way you need to extend this global namespace.\nIt is recommended to define this extension of the namespace in one central place for all instances."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsxs)(n.strong,{children:["Note the ",(0,a.jsx)(n.code,{children:"JSX.IntrinsicElement<T extends Instance>"})," expects the type for an instance to be passed into it to allow for the properties & events to be typed correctly."]}),"\n",(0,a.jsx)(n.strong,{children:"Also note that, by convention, all Roblox instances should be lowercased."})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"declare global {\n\tnamespace JSX {\n\t\tinterface IntrinsicElements {\n\t\t\t// Your instances into here\n\t\t\tproximityprompt: JSX.IntrinsicElement<ProximityPrompt>;\n\t\t\tfolder: JSX.IntrinsicElement<Folder>;\n\t\t}\n\t}\n}\n"})})]})}function V(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(A,{...e})}):A(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>i});var r=t(6540);const a={},s=r.createContext(a);function o(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);